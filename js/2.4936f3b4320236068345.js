webpackJsonp([2],{678:function(e,t,r){var i=r(362)(r(697),r(754),null,null,null);e.exports=i.exports},697:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(136),a=r.n(i),n=r(716),s=r.n(n),u=r(135),l=r.n(u);t.default={name:"article-card",inject:["auth"],props:["article"],computed:{canChangeVisibility:function(){return!!this.auth.currentUser&&("user"===this.$route.name?this.auth.currentUser.admin||this.auth.currentUser.id===this.$route.params.id:"current_user"===this.$route.name)}},methods:{visible:function(){function e(e,r){return t.apply(this,arguments)}var t=l()(a.a.mark(function e(t,r){var i,n,u=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$apollo.mutate({mutation:this.$gql.mutations.updateArticle,variables:{id:this.article.id,published:!this.article.published},update:function(e){if(console.log(e),"current_user"===u.$route.name){var t=e.readQuery({query:u.$gql.queries.currentUser}),r=t.currentUser,i=u.findArticle(r.articles),a=s()(i,2),n=a[0],l=a[1];r.articles.splice(l,1,n),e.writeQuery({query:u.$gql.queries.currentUser,data:{currentUser:r}})}else if("user"===u.$route.name){var o=e.readQuery({query:u.$gql.queries.user,variables:{id:u.$route.params.id}}),c=o.user,d=u.findArticle(c.articles),f=s()(d,2),p=f[0],h=f[1];c.articles.splice(h,1,p),e.writeQuery({query:u.$gql.queries.user,data:{user:c}})}}});case 3:i=e.sent,n=i.data,this.$q.events.$emit("app:showToast","Successfully changed visibility of article","positive"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.$q.events.$emit("app:showToast","Error setting article visibility","negative");case 11:return e.prev=11,r(),e.finish(11);case 14:case"end":return e.stop()}},e,this,[[0,8,11,14]])}));return e}(),findArticle:function(e){var t=this,r=e.findIndex(function(e){return e.id===t.article.id}),i=e[r];return i.published=!this.article.published,[i,r]}}}},710:function(e,t,r){e.exports={default:r(731),__esModule:!0}},711:function(e,t,r){e.exports={default:r(732),__esModule:!0}},716:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=r(711),n=i(a),s=r(710),u=i(s);t.default=function(){function e(e,t){var r=[],i=!0,a=!1,n=void 0;try{for(var s,l=(0,u.default)(e);!(i=(s=l.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw n}}return r}return function(t,r){if(Array.isArray(t))return t;if((0,n.default)(Object(t)))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},731:function(e,t,r){r(364),r(363),e.exports=r(736)},732:function(e,t,r){r(364),r(363),e.exports=r(737)},736:function(e,t,r){var i=r(53),a=r(367);e.exports=r(34).getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},737:function(e,t,r){var i=r(137),a=r(20)("iterator"),n=r(54);e.exports=r(34).isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||n.hasOwnProperty(i(t))}},754:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",[r("q-card-media",{staticClass:"cursor-pointer",attrs:{"overlay-position":"full"},on:{click:function(t){t.stopPropagation(),e.$router.push({name:"article",params:{id:e.article.id}})}}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.article.image,expression:"article.image"}],staticClass:"full-width"}),r("q-card-title",{slot:"overlay"},[e._v(e._s(e.article.title))])],1),r("q-toolbar",{staticClass:"cursor-pointer"},[r("img",{staticClass:"avatar",attrs:{src:e.article.user.image},on:{click:function(t){t.stopPropagation(),e.$router.push({name:"user",params:{id:e.article.user.id}})}}}),r("q-toolbar-title",[e._v(e._s(e.article.user.firstName)+" "+e._s(e.article.user.lastName)),r("span",{slot:"subtitle"},[e._v(e._s(e._f("moment")(e.article.createdAt,"dddd, MMMM Do YYYY")))])]),e.canChangeVisibility&&"articles"!==e.$route.name?r("q-btn",{attrs:{round:"round",small:"small",outline:"outline",loader:"loader",icon:e.article.published?"visibility":"visibility_off"},on:{click:e.visible}}):e._e()],1)],1)},staticRenderFns:[]}}});