webpackJsonp([1],{677:function(t,e,i){var a=i(362)(i(696),i(758),null,null,null);t.exports=a.exports},696:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(136),r=i.n(a),s=i(135),l=i.n(s),o=i(715),n=i.n(o),c=i(714),d=i.n(c),u=i(759),p=i.n(u),m=new p.a;e.default={name:"article",inject:["auth"],props:["id"],metaInfo:function(){return{title:this.article?this.article.title:"DevWebTuts",meta:[{name:"og:title",content:this.article?this.article.title:"DevWebTuts"},{name:"og:image",content:this.article?this.article.image:""},{name:"og:description",content:"Read and Create your own tutorials to help other web developers."},{name:"og:url",content:document.location.href},{name:"og:site_name",content:"DevWebTuts"},{name:"og:type",content:"website"}]}},data:function(){return{loading:0,preview:!1,edit:!1,result:"",article:{id:0,title:"",body:"",image:""},oldArticle:null,deleteVerification:"",popup:null}},created:function(){m.addEventListener("message",this.workerEvent)},destroyed:function(){m.removeEventListener("message",this.workerEvent)},watch:d()({},"article.body",function(t){this.edit||(this.loading=1),m.postMessage(t)}),methods:{workerEvent:function(t){var e=t.data;this.loading=0,this.result=e},editArticle:function(){this.oldArticle=n()({},this.article),this.edit=!0},undoEdit:function(){this.article=n()({},this.oldArticle),this.edit=!1},shareArticle:function(){var t={url:encodeURIComponent(document.location.href),title:encodeURIComponent(this.article.title),image:encodeURIComponent(this.article.image)};this.popup=window.open("https://www.facebook.com/sharer/sharer.php?display=popup&u="+t.url+"&title="+t.title+"&picture="+t.image),this.popup.focus()},deleteArticle:function(){function t(t,i){return e.apply(this,arguments)}var e=l()(r.a.mark(function t(e,i){var a,s,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.deleteVerification===this.article.title){t.next=3;break}return t.abrupt("return");case 3:return a=this.article.id,t.next=6,this.$apollo.mutate({mutation:this.$gql.mutations.deleteArticle,variables:{id:a}});case 6:s=t.sent,l=s.data,this.deleteVerification="",this.$q.events.$emit("app:auth"),this.$q.events.$emit("app:showToast","Article Deleted Successfully","positive"),this.$router.push({name:"current_user"}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),this.$q.events.$emit("app:showToast","Error Deleting Article","negative");case 17:return t.prev=17,i(),t.finish(17);case 20:case"end":return t.stop()}},t,this,[[0,14,17,20]])}));return t}(),updateArticle:function(){function t(t,i){return e.apply(this,arguments)}var e=l()(r.a.mark(function t(e,i){var a,s,l,o,n,c,d,u;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=this.article,s=a.id,l=a.body,o=a.title,n=a.image,c=a.user,t.next=4,this.$apollo.mutate({mutation:this.$gql.mutations.updateArticle,variables:{id:s,body:l,title:o,image:n}});case 4:return d=t.sent,u=d.data,this.edit=!1,t.next=9,this.$apollo.queries.article.refetch();case 9:this.$q.events.$emit("app:showToast","Article Saved Successfully","positive"),"edit"===this.$route.query.action&&this.$router.replace({name:"article",params:{id:this.article.id}}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),this.$q.events.$emit("app:showToast","Error Saving Article","negative");case 16:return t.prev=16,i(),t.finish(16);case 19:case"end":return t.stop()}},t,this,[[0,13,16,19]])}));return t}()},computed:{canEdit:function(){return this.auth.currentUser&&this.article.user&&this.article.user.id===this.auth.currentUser.id}},apollo:{article:function(){return{query:this.$gql.queries.article,pollInterval:1e3,variables:function(){return{id:this.id||0}},loadingKey:"loading",result:function(t){var e=t.data.article;e&&(this.article=n()({},e)),this.edit="edit"===this.$route.query.action&&this.canEdit}}}}}},712:function(t,e,i){t.exports={default:i(733),__esModule:!0}},713:function(t,e,i){t.exports={default:i(734),__esModule:!0}},714:function(t,e,i){"use strict";e.__esModule=!0;var a=i(713),r=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=function(t,e,i){return e in t?(0,r.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},715:function(t,e,i){"use strict";e.__esModule=!0;var a=i(712),r=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}},733:function(t,e,i){i(738),t.exports=i(34).Object.assign},734:function(t,e,i){var a=i(29);t.exports=function(t,e,i){return a.setDesc(t,e,i)}},735:function(t,e,i){var a=i(29),r=i(366),s=i(365);t.exports=i(138)(function(){var t=Object.assign,e={},i={},a=Symbol(),r="abcdefghijklmnopqrst";return e[a]=7,r.split("").forEach(function(t){i[t]=t}),7!=t({},e)[a]||Object.keys(t({},i)).join("")!=r})?function(t,e){for(var i=r(t),l=arguments,o=l.length,n=1,c=a.getKeys,d=a.getSymbols,u=a.isEnum;o>n;)for(var p,m=s(l[n++]),v=d?c(m).concat(d(m)):c(m),f=v.length,h=0;f>h;)u.call(m,p=v[h++])&&(i[p]=m[p]);return i}:Object.assign},738:function(t,e,i){var a=i(85);a(a.S+a.F,"Object",{assign:i(735)})},758:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.loading?i("div",{staticClass:"row window-height"},[i("div",{staticClass:"m-a"},[i("q-spinner-gears",{attrs:{size:200,color:"primary"}})],1)]):t.article?i("div",{staticClass:"vh-100-min"},[t.edit?t._e():[i("div",{staticClass:"fixed-bottom-left gt-xs",staticStyle:{bottom:"50%",left:"16px","z-index":"5"}},[t.canEdit?i("q-btn",{staticClass:"block",staticStyle:{"margin-bottom":"16px"},attrs:{color:"positive",icon:"edit",round:"round"},on:{click:t.editArticle}}):t._e(),i("q-btn",{staticClass:"block",staticStyle:{"margin-bottom":"16px"},attrs:{color:"info",icon:"share",round:"round"},nativeOn:{click:function(e){t.shareArticle(e)}}}),t.canEdit?i("q-btn",{staticClass:"block",staticStyle:{"margin-bottom":"16px"},attrs:{color:"negative",icon:"delete",round:"round"}},[i("q-popover",{ref:"deleteArticlePopover"},[i("div",{staticClass:"bg-error",staticStyle:{padding:"16px"}},[i("div",{staticClass:"title white--text"},[t._v("Delete Article")])]),i("div",{staticStyle:{padding:"16px"}},[i("p",{staticClass:"roboto"},[t._v("Enter "),i("b",{staticClass:"text-secondary"},[t._v(t._s(t.article.title))]),t._v(" to delete")]),i("q-field",{attrs:{icon:"vpn_key"}},[i("q-input",{attrs:{"float-label":"Article Title"},model:{value:t.deleteVerification,callback:function(e){t.deleteVerification=e},expression:"deleteVerification"}})],1),i("q-btn",{staticClass:"full-width",attrs:{color:"negative",disabled:t.deleteVerification!==t.article.title,loader:"loader"},on:{click:t.deleteArticle}},[t._v("Delete")])],1)])],1):t._e()],1)],t.edit?t._e():i("div",{key:"headline",staticClass:"bg-primary relative-position window-height gt-xs"},[i("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.article.image,expression:"article.image",arg:"background-image"}],staticClass:"parallax-attribs fit absolute"}),i("div",{staticClass:"row fit absolute ov"},[i("div",{staticClass:"m-a text-center",staticStyle:{"z-index":"5"}},[i("h2",{staticClass:"text-white"},[t._v(t._s(t.article.title))]),i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.article.user.image,expression:"article.user.image"}],staticClass:"author",on:{click:function(e){t.$router.push({name:"user",params:{id:t.article.user.id}})}}}),i("h4",{staticClass:"text-white"},[t._v(t._s(t.article.user.firstName)+" "+t._s(t.article.user.lastName))]),i("h6",{staticClass:"text-grey-5"},[t._v("Created "+t._s(t._f("moment")(t.article.createdAt,"from")))]),i("h6",{staticClass:"text-grey-5"},[t._v("Updated "+t._s(t._f("moment")(t.article.updatedAt,"from")))])])])]),t.edit?[i("q-toolbar",[i("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.article.image,expression:"article.image",arg:"background-image"}],staticStyle:{width:"100px",height:"100px",border:"2px solid white","margin-right":"16px","background-size":"contain","background-repeat":"no-repeat","background-position":"center center"}},[i("q-popover",{ref:"articleImage"},[i("q-toolbar",[i("q-toolbar-title",[t._v("Article image")])],1),i("div",{staticStyle:{padding:"16px"}},[i("q-field",{attrs:{icon:"add_a_photo"}},[i("q-input",{attrs:{"float-label":"Article Image"},model:{value:t.article.image,callback:function(e){t.article.image=e},expression:"article.image"}})],1)],1)],1)],1),i("q-field",{staticClass:"full-width",attrs:{dark:"dark"}},[i("q-input",{attrs:{dark:"dark","float-label":"Title"},model:{value:t.article.title,callback:function(e){t.article.title=e},expression:"article.title"}})],1)],1)]:i("div",{key:"headline",staticClass:"bg-primary relative-position window-height xs"},[i("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.article.image,expression:"article.image",arg:"background-image"}],staticClass:"parallax-attribs fit absolute"}),i("div",{staticClass:"row fit absolute ov"},[i("div",{staticClass:"m-a text-center",staticStyle:{"z-index":"5"}},[i("h4",{staticClass:"text-white"},[t._v(t._s(t.article.title))]),i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.article.user.image,expression:"article.user.image"}],staticClass:"author",staticStyle:{width:"150px",height:"150px"},on:{click:function(e){t.$router.push({name:"user",params:{id:t.article.user.id}})}}}),i("h6",{staticClass:"text-white"},[t._v(t._s(t.article.user.firstName)+" "+t._s(t.article.user.lastName))]),i("div",{staticClass:"text-grey-5"},[t._v("Created "+t._s(t._f("moment")(t.article.createdAt,"from")))]),i("div",{staticClass:"text-grey-5"},[t._v("Updated "+t._s(t._f("moment")(t.article.updatedAt,"from")))]),i("div",{staticClass:"row justify-around",staticStyle:{"padding-top":"16px"}},[t.canEdit?i("q-btn",{staticClass:"block",staticStyle:{"margin-bottom":"16px"},attrs:{color:"positive",icon:"edit",round:"round",outline:"outline"},on:{click:t.editArticle}}):t._e(),i("q-btn",{staticClass:"block",staticStyle:{"margin-bottom":"16px"},attrs:{color:"info",icon:"share",round:"round",outline:"outline"},nativeOn:{click:function(e){t.shareArticle(e)}}}),t.canEdit?i("q-btn",{staticClass:"block",staticStyle:{"margin-bottom":"16px"},attrs:{color:"negative",icon:"delete",round:"round",outline:"outline"}},[i("q-popover",{ref:"deleteArticlePopover"},[i("div",{staticClass:"bg-error",staticStyle:{padding:"16px"}},[i("div",{staticClass:"title white--text"},[t._v("Delete Article")])]),i("div",{staticStyle:{padding:"16px"}},[i("p",{staticClass:"roboto"},[t._v("Enter "),i("b",{staticClass:"text-secondary"},[t._v(t._s(t.article.title))]),t._v(" to delete")]),i("q-field",{attrs:{icon:"vpn_key"}},[i("q-input",{attrs:{"float-label":"Article Title"},model:{value:t.deleteVerification,callback:function(e){t.deleteVerification=e},expression:"deleteVerification"}})],1),i("q-btn",{staticClass:"full-width",attrs:{color:"negative",disabled:t.deleteVerification!==t.article.title,loader:"loader"},on:{click:t.deleteArticle}},[t._v("Delete")])],1)])],1):t._e()],1)])])]),t.edit?i("div",{staticClass:"fixed-bottom-right z-absolute",staticStyle:{right:"18px",bottom:"18px"}},[i("q-btn",{staticClass:"block",staticStyle:{"margin-bottom":"8px"},attrs:{color:"warning",round:"round",icon:"undo"},on:{click:t.undoEdit}}),i("q-btn",{staticClass:"block",attrs:{color:"positive",round:"round",loader:"loader",icon:"save"},on:{click:t.updateArticle}})],1):t._e(),i("div",{staticClass:"row gt-xs"},[t.edit?i("div",{staticClass:"col-xs-12 col-sm-6"},[i("q-card",[i("code-mirror",{key:"editor",staticClass:"markdown--editor",attrs:{mode:"text/x-gfm"},on:{save:t.updateArticle},model:{value:t.article.body,callback:function(e){t.article.body=e},expression:"article.body"}})],1)],1):t._e(),i("div",{staticClass:"col-xs-12 pa-0",class:t.edit?"col-sm-6":"col-sm-12"},[t.article.body?i("q-card",{key:"preview",staticClass:"article-preview roboto",style:{"margin-left":t.edit?"0px":"100px"}},[i("q-card-main",{domProps:{innerHTML:t._s(t.result)}})],1):t._e()],1)]),t.article.body&&!t.edit?i("q-card",{key:"preview",staticClass:"article-preview no-margin xs roboto",style:{"margin-left":t.edit?"0px":"100px"}},[i("q-card-main",{domProps:{innerHTML:t._s(t.result)}})],1):t._e(),t.edit?i("div",{staticClass:"xs"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-6"},[i("q-btn",{staticClass:"full-width no-margin",attrs:{color:t.preview?"secondary":"primary"},on:{click:function(e){t.preview=!1}}},[t._v("Code")])],1),i("div",{staticClass:"col-xs-6"},[i("q-btn",{staticClass:"full-width no-margin",attrs:{color:t.preview?"primary":"secondary"},on:{click:function(e){t.preview=!0}}},[t._v("Preview")])],1)]),t.preview?i("q-card",{key:"preview",staticClass:"article-preview roboto",style:{"margin-left":t.edit?"0px":"100px"}},[i("q-card-main",{domProps:{innerHTML:t._s(t.result)}})],1):i("q-card",[i("code-mirror",{key:"editor",staticClass:"markdown--editor",attrs:{mode:"text/x-gfm"},on:{save:t.updateArticle},model:{value:t.article.body,callback:function(e){t.article.body=e},expression:"article.body"}})],1)],1):t._e(),t.edit?t._e():i("comments",{staticClass:"gt-xs",style:{"margin-left":t.edit?"0px":"100px"},attrs:{comments:t.article.comments,article:t.article.id}}),t.edit?t._e():i("comments",{staticClass:"xs",attrs:{comments:t.article.comments,article:t.article.id}})],2):t._e()},staticRenderFns:[]}},759:function(t,e,i){t.exports=function(){return new Worker(i.p+"08a2335032c75bd8d04c.worker.js")}}});