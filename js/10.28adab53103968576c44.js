webpackJsonp([10],{684:function(t,e,i){var a=i(362)(i(703),i(747),null,null,null);t.exports=a.exports},703:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(136),r=i.n(a),s=i(135),n=i.n(s);e.default={name:"current-user",inject:["auth"],data:function(){return{search:"",article:{title:"",body:"",image:""}}},methods:{createArticle:function(){function t(t,i){return e.apply(this,arguments)}var e=n()(r.a.mark(function t(e,i){var a,s,n,l,c,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=this.article,s=a.title,n=a.body,l=a.image,s&&this.auth.currentUser){t.next=4;break}return t.abrupt("return");case 4:return console.log(this.article),t.next=7,this.$apollo.mutate({mutation:this.$gql.mutations.createArticle,variables:{title:s,body:n,image:l,userId:this.auth.currentUser.id}});case 7:c=t.sent,o=c.data,console.log(o),this.$q.events.$emit("Created new article","positive"),this.$refs.newArticleDialog.close(),this.$router.push({name:"article",params:{id:o.article.id},query:{action:"edit"}}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),this.$q.events.$emit("Failed creating new article","negative");case 18:return t.prev=18,i(),t.finish(18);case 21:case"end":return t.stop()}},t,this,[[0,15,18,21]])}));return t}()}}},747:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row",staticStyle:{"min-height":"calc(100vh - 100px)"}},[t.auth.userLoading?i("div",{staticClass:"m-a"},[i("q-spinner-gears",{attrs:{size:200,color:"primary"}})],1):t.auth.currentUser?i("div",{staticClass:"fit"},[i("q-modal",{ref:"newArticleDialog"},[i("q-toolbar",[i("q-toolbar-title",[t._v("New Article")]),i("q-btn",{attrs:{icon:"close",small:"small",round:"round",outline:"outline"},on:{click:function(e){t.$refs.newArticleDialog.close()}}}),i("q-btn",{attrs:{icon:"save",small:"small",loader:"loader",round:"round",outline:"outline"},on:{click:t.createArticle}})],1),i("div",{staticStyle:{padding:"24px"}},[i("q-field",{attrs:{icon:"title"}},[i("q-input",{attrs:{"float-label":"Title"},model:{value:t.article.title,callback:function(e){t.article.title=e},expression:"article.title"}})],1),i("div",{staticClass:"text-center"},[i("img",{staticStyle:{height:"300px",width:"300px"},attrs:{src:t.article.image}})]),i("q-field",{attrs:{icon:"add_a_photo"}},[i("q-input",{attrs:{"float-label":"Image"},model:{value:t.article.image,callback:function(e){t.article.image=e},expression:"article.image"}})],1)],1)],1),i("q-btn",{staticClass:"fixed-bottom-right z-absolute",staticStyle:{bottom:"18px",right:"18px","z-index":"5"},attrs:{round:"round",icon:"add",color:"primary"},on:{click:function(e){t.$refs.newArticleDialog.open()}}}),i("div",{staticStyle:{padding:"16px"}},[i("h3",{staticClass:"text-secondary"},[t._v("Articles ("+t._s(t.auth.currentUser.articleCount.count)+")")]),i("h5",[t._v(t._s(t.auth.currentUser.firstName))])]),i("articles",{staticStyle:{"padding-bottom":"80px"},attrs:{articles:t.auth.currentUser.articles}})],1):i("div",{staticClass:"m-a"},[i("h1",{staticClass:"text-center"},[t._v("Login now to create articles")]),i("div",{staticClass:"text-center"},[i("q-btn",{staticStyle:{width:"200px"},attrs:{color:"primary"},on:{click:function(e){t.$root.login()}}},[t._v("Login")])],1)])])},staticRenderFns:[]}}});