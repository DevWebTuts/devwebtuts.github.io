webpackJsonp([14],{676:function(e,t,r){var s=r(362)(r(695),r(755),null,null,null);e.exports=s.exports},695:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(136),n=r.n(s),a=r(135),i=r.n(a);t.default={name:"all-users",inject:["auth"],data:function(){return{loading:0,limit:4,offset:1,search:""}},computed:{loadedItems:function(){return this.limit*this.offset},canViewMore:function(){return!!this.count&&this.loadedItems<this.count.count}},created:function(){this.$q.events.$on("app:users",this.refetch)},methods:{refetch:function(){function e(){return t.apply(this,arguments)}var t=i()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$apollo.queries.users.refetch();case 3:return e.next=5,this.$apollo.queries.count.refetch();case 5:this.$q.events.$emit("app:showToast","Refetched Users Successfully","positive"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.$q.events.$emit("app:showToast","Error Refetching Users","negative");case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return e}(),loadMore:function(){function e(e,r){return t.apply(this,arguments)}var t=i()(n.a.mark(function e(t,r){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.canViewMore){e.next=3;break}return e.abrupt("return");case 3:return this.offset++,e.next=6,this.$apollo.queries.users.fetchMore({variables:{search:this.search,first:this.loadedItems},updateQuery:function(e,t){return{users:t.fetchMoreResult.users}}});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:return e.prev=10,r(),e.finish(10);case 13:case"end":return e.stop()}},e,this,[[0,8,10,13]])}));return e}()},apollo:{count:function(){return{query:this.$gql.queries.usersCount,fetchPolicy:"cache-and-network",loadingKey:"loading",variables:function(){return{search:this.search}}}},users:function(){return{loadingKey:"loading",query:this.$gql.queries.users,variables:{first:4,search:this.search}}}}}},755:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.auth.currentUser.admin?r("div",{staticClass:"vh-100-min"},[r("q-toolbar",{staticClass:"accent",attrs:{flat:"flat",dark:"dark"}},[r("q-toolbar-title",[e._v("Users ("+e._s(e.count?e.count.count:0)+")")]),r("q-search",{attrs:{icon:"search",dark:"dark",inverted:"inverted"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("users",{attrs:{users:e.users,loading:1===e.offset&&e.loading}}),e.offset>1&&e.loading?r("q-progress",{attrs:{indeterminate:"indeterminate",color:"secondary"}}):e._e(),r("div",{staticClass:"text-center",staticStyle:{"margin-bottom":"16px"}},[e.canViewMore?r("q-btn",{staticStyle:{width:"200px"},attrs:{color:"primary",loader:"loader"},on:{click:e.loadMore}},[e._v("View More")]):e._e()],1)],1):r("div",{staticClass:"row window-height"},[e._m(0)])},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-a text-center"},[r("h1",[e._v("You're not an admin")])])}]}}});